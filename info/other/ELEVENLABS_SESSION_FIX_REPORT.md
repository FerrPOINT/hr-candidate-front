# üõ†Ô∏è –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú –° –°–ï–°–°–ò–ï–ô ELEVENLABS

## üìã **–ü–†–û–ë–õ–ï–ú–ê**

–°–µ—Å—Å–∏—è ElevenLabs –±—ã—Å—Ç—Ä–æ –∑–∞–≤–µ—Ä—à–∞–ª–∞—Å—å (—á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã) –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ signedUrl –∏ agentId
- –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ conversationId
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —è–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

## üîç **–ê–ù–ê–õ–ò–ó –ü–†–ò–ß–ò–ù**

### 1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ useElevenLabs**
- –í –ª–æ–≥–∞—Ö –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã `useElevenLabs initialized...`
- –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `useConversation`
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏

### 2. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º:
  - `src/components/ElevenLabsConversation.tsx`
  - `src/shared/components/ElevenLabsConversation.tsx`
- –≠—Ç–æ –º–æ–≥–ª–æ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –∏–º–ø–æ—Ä—Ç–æ–≤

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ useConversation**
- `useConversation` —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ useMemo

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤**
- –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ñ–ª–∞–≥–∏ –∑–∞—â–∏—Ç—ã, –æ–Ω–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥–ª–∏ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### 1. **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Ö—É–∫–∞ useElevenLabs**

#### –î–æ–±–∞–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π:
```typescript
const activeSessions = new Map<string, boolean>();
```

#### –£–ª—É—á—à–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤:
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –ª–∏ —É–∂–µ —Å–µ—Å—Å–∏—è –¥–ª—è —ç—Ç–æ–≥–æ sessionId
if (activeSessions.has(sessionKey)) {
  console.log('‚ö†Ô∏è Session already active for this sessionId:', sessionKey);
  return;
}
```

#### –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è conversation:
```typescript
const conversationConfig = useMemo(() => ({
  // ... –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}), [onConnect, onDisconnect, onMessage, onError, onAgentStart, onAgentEnd, onUserStart, onUserEnd]);
```

#### –î–æ–±–∞–≤–ª–µ–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```typescript
const componentId = useRef(`session_${Date.now()}_${Math.random()}`);
```

### 2. **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
- –£–¥–∞–ª–µ–Ω `src/shared/components/ElevenLabsConversation.tsx`
- –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `src/components/ElevenLabsConversation.tsx`

### 3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ ElabsSession**
- –£–±—Ä–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π `useElevenLabs` –∏–∑ `ElabsSession`
- –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `ElevenLabsConversation` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 4. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ Component ID –≤–æ –≤—Å–µ –ª–æ–≥–∏
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–µ—Å—Å–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É

### 5. **–ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–ª–∞–≥–æ–≤ –∑–∞—â–∏—Ç—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üß™ **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `useElevenLabs`
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `useConversation`
- ‚ùå –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (1-2 —Å–µ–∫—É–Ω–¥—ã)
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `useConversation`
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ ID
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤

## üöÄ **–ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   npm start
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `/interview/60/session`
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π ID –∏–Ω—Ç–µ—Ä–≤—å—é

3. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ –ª–æ–≥–∏:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `useElevenLabs initialized`
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π Component ID –≤ –∫–∞–∂–¥–æ–º –ª–æ–≥–µ
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö `Creating stable conversation instance`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Å—Å–∏—é:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
   - –°–µ—Å—Å–∏—è –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
   - WebSocket –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìä **–û–ñ–ò–î–ê–ï–ú–û–ï –ü–û–í–ï–î–ï–ù–ò–ï**

### –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîç useElevenLabs initialized with options: {...}
üîç ElevenLabsConversation initialized - Component ID: conversation_1234567890_0.123456789
üöÄ Starting ElevenLabs session...
‚úÖ Connected to ElevenLabs
‚úÖ ElevenLabs session started successfully
```

### –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîç useElevenLabs initialized with options: {...}  // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã
üîç Creating stable conversation instance         // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–∏—è
‚ùå Disconnected from ElevenLabs                  // –ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
```

## üîß **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø**

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π:**
   ```typescript
   console.log('üîç Active sessions:', Array.from(activeSessions.keys()));
   ```

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
   ```typescript
   activeSessions.delete(sessionKey);
   ```

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏:**
   ```typescript
   if (!data.agentId || !data.signedUrl) {
     throw new Error('Invalid session data');
   }
   ```

## üìù **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è—Ö** –∏ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏** `useElevenLabs`. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç:

1. ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
2. ‚úÖ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `useConversation`
3. ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤
5. ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–¢–µ–ø–µ—Ä—å —Å–µ—Å—Å–∏—è ElevenLabs –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. 