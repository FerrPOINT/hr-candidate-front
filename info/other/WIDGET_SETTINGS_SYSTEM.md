# Система глобальных настроек виджетов

## Обзор

Система глобальных настроек виджетов позволяет сохранять и применять настройки для каждого типа виджета. Это обеспечивает консистентность при дублировании виджетов и создании новых экземпляров.

## Архитектура

### 1. WidgetSettingsStore (`src/store/widgetSettingsStore.ts`)
- Глобальный store для хранения настроек всех типов виджетов
- Автоматическое сохранение в localStorage
- Безопасный доступ к localStorage с проверкой SSR

### 2. Интеграция с PagesStore
- При дублировании виджета настройки сохраняются в глобальный store
- При создании нового виджета применяются глобальные настройки
- Локальные props имеют приоритет над глобальными

### 3. RightPanel
- Автоматическое сохранение изменений в глобальный store
- Кнопка сброса настроек для конкретного виджета
- Отображение текущих настроек

### 4. LeftPanel
- Кнопка для просмотра всех глобальных настроек
- Панель управления настройками виджетов

## Использование

### Дублирование виджета
1. Выберите виджет на холсте
2. Нажмите кнопку "Дублировать" в правой панели
3. Настройки автоматически сохраняются в глобальный store
4. Новый виджет создается с теми же настройками

### Изменение настроек
1. Выберите виджет
2. Измените свойства в правой панели
3. Настройки автоматически сохраняются глобально
4. Все новые виджеты этого типа будут использовать эти настройки

### Управление настройками
1. Нажмите кнопку ⚙️ в левой панели
2. Просмотрите все сохраненные настройки
3. Сбросьте настройки для конкретного типа виджета
4. Сбросьте все настройки

## API

### WidgetSettingsStore
```typescript
// Получить настройки для типа виджета
const settings = getWidgetSettings('vacancyList');

// Обновить настройку
updateWidgetSetting('vacancyList', 'maxItems', 20);

// Установить все настройки для типа
setWidgetSettings('vacancyList', { maxItems: 20, showSearch: true });

// Сбросить настройки для типа
resetWidgetSettings('vacancyList');
```

### Хук useWidgetSettings
```typescript
const { settings, updateSetting, setSettings, resetSettings } = useWidgetSettings('vacancyList');
```

## Преимущества

1. **Консистентность**: Все виджеты одного типа имеют одинаковые настройки по умолчанию
2. **Производительность**: Настройки кэшируются в localStorage
3. **Удобство**: Автоматическое сохранение при изменении
4. **Гибкость**: Возможность сброса настроек для отдельных типов
5. **Безопасность**: SSR-совместимый доступ к localStorage

## Структура данных

```typescript
interface WidgetSettings {
  [widgetType: string]: {
    [settingKey: string]: any;
  };
}

// Пример
{
  "vacancyList": {
    "maxItems": 10,
    "showSearch": true,
    "showFilters": true
  },
  "dashboard": {
    "showStats": true,
    "showRecentInterviews": true
  }
}
``` 